<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title>BonVoyage - Tours</title>
    <link href="css/site.css" rel="stylesheet">
    <link href="lib/bootstrap/dist/css/bootstrap.css" rel="stylesheet">
    <link href="lib/bootstrap/dist/css/bootstrap.css.map" rel="stylesheet">
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://ajax.aspnetcdn.com/ajax/jquery/jquery-2.2.0.min.js"></script>
    <style>
        .visible {
            display: block;            
        }

        .nonVisible {
            display: none;            
        }
    </style>
</head>
<body>
    <div class="container" id="app"></div>
    <script type="text/babel" src="Tours.jsx"></script>
    <script type="text/babel" src="ToursInfo.jsx"></script>
    <script type="text/babel" src="ToursPhotos.jsx"></script>    
    <script type="text/babel" src="HotelsInfo.jsx"></script>
    <script type="text/babel" src="HotelsPhotos.jsx"></script>
    <script type="text/babel">

        function GetTours() {

            $.ajax({
                url: 'https://localhost:7299/api/tours',
                method: "GET",
                contentType: "application/json",
                success: function (tours) {
                    let toursInfo = [];

                    $.each(tours, function (index, tour) {
                        toursInfo.push(tour);
                    })
                    console.log(toursInfo);
                    $.ajax({
                url: 'https://localhost:7299/api/hotels',
                method: "GET",
                contentType: "application/json",
                success: function (hotels) {
                    let hotelsInfo = [];

                    $.each(hotels, function (index, hotel) {
                        hotelsInfo.push(hotel);
                    })
                    console.log(hotelsInfo);
                    const propsValues = {
                        title: "All our tours",
                        tours: toursInfo,
                        hotels: hotelsInfo
                    };
                    ReactDOM.createRoot(document.getElementById("app")).render(
                            <React.StrictMode>
                                <Tours data={propsValues} />
                            </React.StrictMode>
                        );
                },
                error: function (x, y, z) {
                    alert(x + '\n' + y + '\n' + z);
                }
        });
            },
            error: function (x, y, z) {
                alert(x + '\n' + y + '\n' + z);
            }
        });
        }
        GetTours();
    </script>
</body>
</html>
